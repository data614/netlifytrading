<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Research Lab — Professional Trading Desk</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="ai-pages.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
</head>
<body>
  <div class="ai-shell">
    <header class="ai-header">
      <div>
        <h1>AI Research Lab</h1>
        <p class="ai-tagline">An institutional-grade intelligence surface for equity research. Search any listing, interrogate company events and filings, and let ChatGPT 5 synthesize a defensible view of intrinsic value in seconds.</p>
      </div>
      <nav class="ai-nav">
        <a href="../index.html">Core Desk</a>
        <a href="ai-screener.html">AI Screener</a>
        <a class="active" href="ai-research.html">AI Research Lab</a>
      </nav>
    </header>

    <section class="ai-card ai-search-panel">
      <div class="ai-section-title">
        <h2>Find a listing</h2>
        <span class="ai-chip"><i class="fa-solid fa-robot"></i> ChatGPT 5 valuation engine</span>
      </div>
      <div class="ai-flex">
        <label style="flex:2;min-width:220px;">
          <span class="ai-muted">Search ticker, ISIN, exchange or company</span>
          <input id="researchSearch" class="ai-input" placeholder="Try AAPL, ASX:WOW, LSE:BARC…" autocomplete="off" />
        </label>
        <label style="flex:1;min-width:200px;">
          <span class="ai-muted">Exchange filter</span>
          <select id="researchExchange" class="ai-select">
            <option value="">All venues</option>
            <option value="XNAS">NASDAQ</option>
            <option value="XNYS">NYSE</option>
            <option value="XASE">AMEX</option>
            <option value="XASX">ASX</option>
            <option value="XLON">London (LSE)</option>
            <option value="XTSE">TSX</option>
            <option value="XHKG">HKEX</option>
            <option value="XTKS">Tokyo</option>
            <option value="XETR">XETRA</option>
          </select>
        </label>
      </div>
      <div id="researchSearchResults" class="ai-search-results"></div>
    </section>

    <section class="ai-grid">
      <article class="ai-card">
        <div class="ai-section-title">
          <h2>Live market structure <span id="researchSymbolLabel"></span></h2>
          <div class="ai-timeframes" id="researchTimeframes">
            <button data-kind="intraday" data-interval="5min" data-limit="78" class="active">1D</button>
            <button data-kind="intraday" data-interval="15min" data-limit="156">1W</button>
            <button data-kind="eod" data-interval="daily" data-limit="90">3M</button>
            <button data-kind="eod" data-interval="daily" data-limit="180">6M</button>
            <button data-kind="eod" data-interval="daily" data-limit="365">1Y</button>
            <button data-kind="eod" data-interval="daily" data-limit="730">2Y</button>
          </div>
        </div>
        <div class="ai-chart-container">
          <canvas id="researchChart"></canvas>
        </div>
        <div class="ai-status" id="researchChartStatus"></div>
      </article>

      <article class="ai-card" id="researchSnapshot">
        <div class="ai-section-title">
          <h2>Quant snapshot</h2>
          <small id="researchSnapshotTimestamp"></small>
        </div>
        <div class="ai-grid" style="grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px;">
          <div>
            <div class="ai-muted">Last price</div>
            <div class="ai-metric" id="researchLastPrice">—</div>
            <div class="ai-status" id="researchLastChange">—</div>
          </div>
          <div>
            <div class="ai-muted">Valuation</div>
            <div class="ai-metric" id="researchFairValue">—</div>
            <div class="ai-status" id="researchValuationSignal">—</div>
          </div>
          <div>
            <div class="ai-muted">Quality</div>
            <div class="ai-metric" id="researchQualityScore">—</div>
            <div class="ai-status" id="researchQualityLabel">—</div>
          </div>
          <div>
            <div class="ai-muted">Momentum</div>
            <div class="ai-metric" id="researchMomentum">—</div>
            <div class="ai-status" id="researchMomentumLabel">—</div>
          </div>
        </div>
        <div class="ai-pill-list" id="researchKeyMetrics"></div>
      </article>
    </section>

    <section class="ai-grid">
      <article class="ai-card" id="researchAiPanel">
        <div class="ai-section-title">
          <h2>ChatGPT 5 view</h2>
          <div class="ai-status" id="researchAiStatus">Awaiting prompt…</div>
        </div>
        <div class="ai-highlight" id="researchAiOutput">Select a company to generate an AI research note. The assistant will blend price action, fundamentals, filings and event risk into a concise thesis with a fair value range.</div>
        <button class="ai-button" id="researchAiRefresh"><i class="fa-solid fa-wand-magic-sparkles"></i>&nbsp;Refresh insight</button>
      </article>

      <article class="ai-card" id="researchEvents">
        <div class="ai-section-title">
          <h2>Company events</h2>
          <small class="ai-status" id="researchEventsStatus">Waiting for symbol…</small>
        </div>
        <ul class="ai-list" id="researchEventsList"></ul>
      </article>
    </section>

    <section class="ai-grid">
      <article class="ai-card" id="researchDocuments">
        <div class="ai-section-title">
          <h2>Key filings &amp; transcripts</h2>
          <small class="ai-status" id="researchDocumentsStatus">—</small>
        </div>
        <ul class="ai-list" id="researchDocumentsList"></ul>
      </article>
      <article class="ai-card" id="researchFundamentals">
        <div class="ai-section-title">
          <h2>Fundamental trendlines</h2>
          <small class="ai-status" id="researchFundamentalsStatus">—</small>
        </div>
        <table class="ai-table" id="researchFundamentalsTable">
          <thead>
            <tr><th>Period</th><th>Revenue YoY</th><th>EPS</th><th>Margins</th><th>Leverage</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </article>
    </section>
  </div>

  <footer class="ai-footer">Built for deep work. Configure API keys for Tiingo, NewsAPI and OpenAI/ChatGPT 5 in your Netlify environment to go live.</footer>

  <script type="module" src="ai-utils.js"></script>
  <script type="module" src="ai-research.js"></script>
</body>
</html>
